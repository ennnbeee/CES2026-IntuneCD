{
     "executionFrequency": "PT0S",
     "retryCount": 0,
     "blockExecutionNotifications": false,
     "displayName": "[intune-my-macs] SCR-SYS-101 - Configure Dock",
     "description": "Configures the macOS Dock with a standardized set of Microsoft 365 and system applications. Optionally waits for applications to be installed before configuration. Supports both dockutil and native plist manipulation methods. Integrates with Swift Dialog for deployment progress visualization and adapts to macOS versions (Apps.app vs Launchpad).",
     "scriptContent": "IyEvYmluL3pzaAojc2V0IC14CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIwojIyBTY3JpcHQgdG8gd2FpdCBmb3IgYXBwcyB0byBiZSBpbnN0YWxsZWQgYW5kIHRoZW4gY29uZmlndXJlIHRoZSBNYWMgRG9jawojIwojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgojIyBDb3B5cmlnaHQgKGMpIDIwMjAgTWljcm9zb2Z0IENvcnAuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiMjIFNjcmlwdHMgYXJlIG5vdCBzdXBwb3J0ZWQgdW5kZXIgYW55IE1pY3Jvc29mdCBzdGFuZGFyZCBzdXBwb3J0IHByb2dyYW0gb3Igc2VydmljZS4gVGhlIHNjcmlwdHMgYXJlIHByb3ZpZGVkIEFTIElTIHdpdGhvdXQgd2FycmFudHkgb2YgYW55IGtpbmQuCiMjIE1pY3Jvc29mdCBkaXNjbGFpbXMgYWxsIGltcGxpZWQgd2FycmFudGllcyBpbmNsdWRpbmcsIHdpdGhvdXQgbGltaXRhdGlvbiwgYW55IGltcGxpZWQgd2FycmFudGllcyBvZiBtZXJjaGFudGFiaWxpdHkgb3Igb2YgZml0bmVzcyBmb3IgYQojIyBwYXJ0aWN1bGFyIHB1cnBvc2UuIFRoZSBlbnRpcmUgcmlzayBhcmlzaW5nIG91dCBvZiB0aGUgdXNlIG9yIHBlcmZvcm1hbmNlIG9mIHRoZSBzY3JpcHRzIGFuZCBkb2N1bWVudGF0aW9uIHJlbWFpbnMgd2l0aCB5b3UuIEluIG5vIGV2ZW50IHNoYWxsCiMjIE1pY3Jvc29mdCwgaXRzIGF1dGhvcnMsIG9yIGFueW9uZSBlbHNlIGludm9sdmVkIGluIHRoZSBjcmVhdGlvbiwgcHJvZHVjdGlvbiwgb3IgZGVsaXZlcnkgb2YgdGhlIHNjcmlwdHMgYmUgbGlhYmxlIGZvciBhbnkgZGFtYWdlcyB3aGF0c29ldmVyCiMjIChpbmNsdWRpbmcsIHdpdGhvdXQgbGltaXRhdGlvbiwgZGFtYWdlcyBmb3IgbG9zcyBvZiBidXNpbmVzcyBwcm9maXRzLCBidXNpbmVzcyBpbnRlcnJ1cHRpb24sIGxvc3Mgb2YgYnVzaW5lc3MgaW5mb3JtYXRpb24sIG9yIG90aGVyIHBlY3VuaWFyeQojIyBsb3NzKSBhcmlzaW5nIG91dCBvZiB0aGUgdXNlIG9mIG9yIGluYWJpbGl0eSB0byB1c2UgdGhlIHNhbXBsZSBzY3JpcHRzIG9yIGRvY3VtZW50YXRpb24sIGV2ZW4gaWYgTWljcm9zb2Z0IGhhcyBiZWVuIGFkdmlzZWQgb2YgdGhlIHBvc3NpYmlsaXR5CiMjIG9mIHN1Y2ggZGFtYWdlcy4KIyMgRmVlZGJhY2s6IG5laWxqb2huQG1pY3Jvc29mdC5jb20KCnVzZURvY2tVdGlsPWZhbHNlCndhaXRGb3JBcHBzPXRydWUKCiMgRGV0ZWN0IG1hY09TICJUYWhvZSIgKDI2KSBBcHBzLmFwcCByZXBsYWNlbWVudCBmb3IgTGF1bmNocGFkCmxhdW5jaGVyQXBwPSIiCmlmIFtbIC1lICIvU3lzdGVtL0FwcGxpY2F0aW9ucy9BcHBzLmFwcCIgXV07IHRoZW4KICAjIG1hY09TIDI2KyAoVGFob2UpIG5ldyB1bmlmaWVkIEFwcHMgbGF1bmNoZXIKICBsYXVuY2hlckFwcD0iL1N5c3RlbS9BcHBsaWNhdGlvbnMvQXBwcy5hcHAiCmVsaWYgW1sgLWUgIi9TeXN0ZW0vQXBwbGljYXRpb25zL0xhdW5jaHBhZC5hcHAiIF1dOyB0aGVuCiAgbGF1bmNoZXJBcHA9Ii9TeXN0ZW0vQXBwbGljYXRpb25zL0xhdW5jaHBhZC5hcHAiCmZpCgojIEhvbGQgc2NyaXB0IHVudGlsIERvY2sgaXMgcnVubmluZywgb3RoZXJ3aXNlIHdlIG1pZ2h0IHJ1biB1bmRlciBfbWJzZXR1cHVzZXIgd2hpY2ggd291bGQgYmUgYmFkCnVudGlsIHBncmVwIC14ICJEb2NrIiAmPi9kZXYvbnVsbDsgZG8KICBzbGVlcCAxMApkb25lCgpjdXJyZW50VXNlcj0kKCBzY3V0aWwgPDw8ICJzaG93IFN0YXRlOi9Vc2Vycy9Db25zb2xlVXNlciIgfCBhd2sgJy9OYW1lIDovIHsgcHJpbnQgJDMgfScgKQoKIyBHZXQgdWlkIGxvZ2dlZCBpbiB1c2VyCnVpZD0kKGlkIC11ICIke2N1cnJlbnRVc2VyfSIpCgojIEN1cnJlbnQgVXNlciBob21lIGZvbGRlciAtIGRvIGl0IHRoaXMgd2F5IGluIGNhc2UgdGhlIGZvbGRlciBpc24ndCBpbiAvVXNlcnMKdXNlckhvbWU9JChkc2NsIC4gLXJlYWQgL3VzZXJzLyR7Y3VycmVudFVzZXJ9IE5GU0hvbWVEaXJlY3RvcnkgfCBjdXQgLWQgIiAiIC1mIDIpCgojIExvZ2dpbmcgZm9sZGVyIGFuZCBmaWxlcwpsb2dGb2xkZXI9Ii9MaWJyYXJ5L0xvZ3MvTWljcm9zb2Z0L0ludHVuZVNjcmlwdHMvYWRkQXBwc3RvRG9jayIKbG9nPSR7bG9nRm9sZGVyfS9hZGRBcHBzdG9Eb2NrLmxvZwpta2RpciAtcCAiJGxvZ0ZvbGRlciIKZXhlYyAmPiA+KHRlZSAtYSAiJGxvZyIpCgojIFBhdGggdG8gcGxpc3QKcGxpc3Q9IiR7dXNlckhvbWV9L0xpYnJhcnkvUHJlZmVyZW5jZXMvY29tLmFwcGxlLmRvY2sucGxpc3QiCgojIERldGVybWluZSB0aGUgY29ycmVjdCBzZXR0aW5ncyBhcHAKaWYgW1sgLWUgIi9TeXN0ZW0vQXBwbGljYXRpb25zL1N5c3RlbSBTZXR0aW5ncy5hcHAiIF1dOyB0aGVuCiAgICBzZXR0aW5nc0FwcD0iU3lzdGVtIFNldHRpbmdzLmFwcCIKZWxzZQogICAgc2V0dGluZ3NBcHA9IlN5c3RlbSBQcmVmZXJlbmNlcy5hcHAiCmZpCgpkb2NrYXBwcz0oICAiJGxhdW5jaGVyQXBwIgogICAgICAgICAgICAiL0FwcGxpY2F0aW9ucy9NaWNyb3NvZnQgMzY1IENvcGlsb3QuYXBwIgogICAgICAgICAgICAiL0FwcGxpY2F0aW9ucy9NaWNyb3NvZnQgRWRnZS5hcHAiCiAgICAgICAgICAgICIvQXBwbGljYXRpb25zL01pY3Jvc29mdCBPdXRsb29rLmFwcCIKICAgICAgICAgICAgIi9BcHBsaWNhdGlvbnMvTWljcm9zb2Z0IFdvcmQuYXBwIgogICAgICAgICAgICAiL0FwcGxpY2F0aW9ucy9NaWNyb3NvZnQgRXhjZWwuYXBwIgogICAgICAgICAgICAiL0FwcGxpY2F0aW9ucy9NaWNyb3NvZnQgUG93ZXJQb2ludC5hcHAiCiAgICAgICAgICAgICIvQXBwbGljYXRpb25zL01pY3Jvc29mdCBPbmVOb3RlLmFwcCIKICAgICAgICAgICAgIi9BcHBsaWNhdGlvbnMvTWljcm9zb2Z0IFRlYW1zLmFwcCIKICAgICAgICAgICAgIi9BcHBsaWNhdGlvbnMvQ29tcGFueSBQb3J0YWwuYXBwIgogICAgICAgICAgICAiL0xpYnJhcnkvQXBwbGljYXRpb24gU3VwcG9ydC9NaWNyb3NvZnQvTUFVMi4wL01pY3Jvc29mdCBBdXRvVXBkYXRlLmFwcCIKICAgICAgICAgICAgIi9TeXN0ZW0vQXBwbGljYXRpb25zL0FwcCBTdG9yZS5hcHAiCiAgICAgICAgICAgICIvU3lzdGVtL0FwcGxpY2F0aW9ucy9VdGlsaXRpZXMvVGVybWluYWwuYXBwIgogICAgICAgICAgICAiL1N5c3RlbS9BcHBsaWNhdGlvbnMvJHNldHRpbmdzQXBwIikKCiMgUmVtb3ZlIGVtcHR5IGVudHJpZXMgKGlmIG5laXRoZXIgQXBwcy5hcHAgbm9yIExhdW5jaHBhZC5hcHAgZXhpc3RlZCkKY2xlYW5lZERvY2tBcHBzPSgpCmZvciBhIGluICIke2RvY2thcHBzW0BdfSI7IGRvCiAgW1sgLXogIiRhIiBdXSAmJiBjb250aW51ZQogIGNsZWFuZWREb2NrQXBwcys9KCIkYSIpCmRvbmUKZG9ja2FwcHM9KCR7Y2xlYW5lZERvY2tBcHBzW0BdfSkKCmluc3RhbGxfZG9ja3V0aWxfaWZfbWlzc2luZygpIHsKICAjIENoZWNrIGlmIGRvY2t1dGlsIGlzIGluc3RhbGxlZAogIGlmIFtbICEgLWUgIi91c3IvbG9jYWwvYmluL2RvY2t1dGlsIiBdXTsgdGhlbgogICAgZWNobyAiJChkYXRlKSB8IGRvY2t1dGlsIGlzIG5vdCBwcmVzZW50LCBpbnN0YWxsaW5nIgoKICAgICMgRG93bmxvYWQgZG9ja3V0aWwgcGFja2FnZQogICAgaWYgY3VybCAtTCAiaHR0cHM6Ly9naXRodWIuY29tL2tjcmF3Zm9yZC9kb2NrdXRpbC9yZWxlYXNlcy9kb3dubG9hZC8zLjEuMy9kb2NrdXRpbC0zLjEuMy5wa2ciIC1vIC92YXIvdG1wL2RvY2t1dGlsLnBrZzsgdGhlbgogICAgICBlY2hvICIkKGRhdGUpIHwgU3VjY2Vzc2Z1bGx5IGRvd25sb2FkZWQgZG9ja3V0aWwucGtnIgogICAgZWxzZQogICAgICBlY2hvICIkKGRhdGUpIHwgRmFpbGVkIHRvIGRvd25sb2FkIGRvY2t1dGlsLnBrZyIKICAgICAgcmV0dXJuIDEKICAgIGZpCgogICAgIyBJbnN0YWxsIGRvY2t1dGlsIHBhY2thZ2UKICAgIGlmIHN1ZG8gaW5zdGFsbGVyIC1wa2cgL3Zhci90bXAvZG9ja3V0aWwucGtnIC10YXJnZXQgLzsgdGhlbgogICAgICBlY2hvICIkKGRhdGUpIHwgU3VjY2Vzc2Z1bGx5IGluc3RhbGxlZCBkb2NrdXRpbCIKICAgIGVsc2UKICAgICAgZWNobyAiJChkYXRlKSB8IEZhaWxlZCB0byBpbnN0YWxsIGRvY2t1dGlsIgogICAgICByZXR1cm4gMQogICAgZmkKCiAgZWxzZQogICAgZWNobyAiJChkYXRlKSB8IGRvY2t1dGlsIGlzIGFscmVhZHkgcHJlc2VudCIKICBmaQp9CgojIENvbnZpZW5pZW5jZSBmdW5jdGlvbiB0byBoYW5kbGUgc3dpZnREaWFsb2cgc3RhdHVzIHVwZGF0ZXMKIyB1c2FnZTogdXBkYXRlU3BsYXNoU2NyZWVuICJzdGF0dXMiICJtZXNzYWdlIgpmdW5jdGlvbiB1cGRhdGVfc3dpZnRfZGlhbG9nICgpIHsKICAgIGlmIFtbIC1lICIvTGlicmFyeS9BcHBsaWNhdGlvbiBTdXBwb3J0L0RpYWxvZy9EaWFsb2cuYXBwL0NvbnRlbnRzL01hY09TL0RpYWxvZyIgXV07IHRoZW4KICAgICAgICAjIFN1cHBvcnRlZCBzdGF0dXM6IHdhaXQsIHN1Y2Nlc3MsIGZhaWwsIGVycm9yLCBwZW5kaW5nIG9yIHByb2dyZXNzOnh4CiAgICAgICAgZWNobyAiJChkYXRlKSB8ICAgICBVcGRhdGluZyBTd2lmdCBEaWFsb2cgbW9uaXRvciBmb3IgRG9jayB0byBbJDFdIgogICAgICAgIGVjaG8gbGlzdGl0ZW06IHRpdGxlOiBEb2NrLCBzdGF0dXM6ICQxLCBzdGF0dXN0ZXh0OiAkMiA+PiAvdmFyL3RtcC9kaWFsb2cubG9nIAogICAgZmkKCn0KCiMgQ29udmVuaWVuY2UgZnVuY3Rpb24gdG8gcnVuIGEgY29tbWFuZCBhcyB0aGUgY3VycmVudCB1c2VyCiMgdXNhZ2U6IHJ1bl9hc191c2VyIGNvbW1hbmQgYXJndW1lbnRzLi4uCnJ1bl9hc191c2VyKCkgeyAgCglpZiBbWyAiJHtjdXJyZW50VXNlcn0iICE9ICJsb2dpbndpbmRvdyIgXV07IHRoZW4KCQlsYXVuY2hjdGwgYXN1c2VyICIkdWlkIiBzdWRvIC11ICIke2N1cnJlbnRVc2VyfSIgIiRAIgoJZWxzZQoJCWVjaG8gIm5vIHVzZXIgbG9nZ2VkIGluIgoJCWV4aXQgMQoJZmkKfQoKY29uZmlndXJlX2RvY2tfd2l0aF9kb2NrdXRpbCAoKSB7CgogICAgIyBVcGRhdGUgU3dpZnQgRGlhbG9nCiAgICB1cGRhdGVfc3dpZnRfZGlhbG9nIHdhaXQgIkNvbmZpZ3VyaW5nIGRvY2suLi4iCgogICAgZG9ja3V0aWw9Ii91c3IvbG9jYWwvYmluL2RvY2t1dGlsIgoKICAgICMgQ2xlYXIgRG9jawogICAgcnVuX2FzX3VzZXIgIiR7ZG9ja3V0aWx9IiAtLXJlbW92ZSBhbGwgLS1uby1yZXN0YXJ0ICR7cGxpc3R9CgogICAgIyBBZGQgQXBwcyB0byBEb2NrIGluIG9yZGVyCiAgICBmb3IgYXBwIGluICIke2RvY2thcHBzW0BdfSI7IGRvCiAgICAgIGlmIFtbIC1lICIkYXBwIiBdXTsgdGhlbgogICAgICAgIGVjaG8gIiQoZGF0ZSkgfCBBZGRpbmcgJHthcHB9IHRvIERvY2suLi4iCiAgICAgICAgcnVuX2FzX3VzZXIgIiR7ZG9ja3V0aWx9IiAtLWFkZCAiJHthcHB9IiAtLXNlY3Rpb24gYXBwcyAtLW5vLXJlc3RhcnQgJHtwbGlzdH0gPiAvZGV2L251bGwgMj4mMQogICAgICBlbHNlCiAgICAgICAgZWNobyAiJChkYXRlKSB8ICR7YXBwfSBub3QgaW5zdGFsbGVkLCBza2lwcGluZy4uLiIKICAgICAgZmkKICAgIGRvbmUKCiAgICAjIEFkZCBEb3dubG9hZHMgRm9sZGVyCiAgICBydW5fYXNfdXNlciAiJHtkb2NrdXRpbH0iIC0tYWRkICIke3VzZXJIb21lfS9Eb3dubG9hZHMiIC0tc2VjdGlvbiBvdGhlcnMgLS1uby1yZXN0YXJ0ICR7cGxpc3R9ID4gL2Rldi9udWxsIDI+JjEKCiAgICBraWxsYWxsIC1LSUxMIERvY2sKICAgIAogICAgdG91Y2ggIi9Vc2Vycy8kY3VycmVudFVzZXIvTGlicmFyeS9QcmVmZXJlbmNlcy8uZG9ja2NvbmZpZ3VyZWQiCiAgICB1cGRhdGVfc3dpZnRfZGlhbG9nIHN1Y2Nlc3MgIkNvbmZpZ3VyZWQgZG9jay4uLiIKfQoKY29uZmlndXJlX2RvY2tfdmlhX3BsaXN0ICgpIHsKCiAgIyBVcGRhdGUgU3dpZnQgRGlhbG9nCiAgdXBkYXRlX3N3aWZ0X2RpYWxvZyB3YWl0ICJDb25maWd1cmluZyBkb2NrLi4uIgoKICAjIENsZWFyaW5nIERvY2sKICBlY2hvICIkKGRhdGUpIHwgIFJlbW92aW5nIERvY2sgUGVyc2lzdGVudCBBcHBzIgogICNydW5fYXNfdXNlciBkZWZhdWx0cyBkZWxldGUgY29tLmFwcGxlLmRvY2sKICBydW5fYXNfdXNlciBkZWZhdWx0cyBkZWxldGUgY29tLmFwcGxlLmRvY2sgcGVyc2lzdGVudC1hcHBzCiAgcnVuX2FzX3VzZXIgZGVmYXVsdHMgZGVsZXRlIGNvbS5hcHBsZS5kb2NrIHBlcnNpc3RlbnQtb3RoZXJzCgogIGVjaG8gIiQoZGF0ZSkgfCAgQWRkaW5nIEFwcHMgdG8gRG9jayIKICBmb3IgaSBpbiAiJHtkb2NrYXBwc1tAXX0iOyBkbwogICAgaWYgW1sgLWEgIiRpIiBdXSA7IHRoZW4KICAgICAgZWNobyAiJChkYXRlKSB8ICBBZGRpbmcgWyRpXSB0byBEb2NrIgogICAgICBydW5fYXNfdXNlciBkZWZhdWx0cyB3cml0ZSBjb20uYXBwbGUuZG9jayBwZXJzaXN0ZW50LWFwcHMgLWFycmF5LWFkZCAiPGRpY3Q+PGtleT50aWxlLWRhdGE8L2tleT48ZGljdD48a2V5PmZpbGUtZGF0YTwva2V5PjxkaWN0PjxrZXk+X0NGVVJMU3RyaW5nPC9rZXk+PHN0cmluZz4kaTwvc3RyaW5nPjxrZXk+X0NGVVJMU3RyaW5nVHlwZTwva2V5PjxpbnRlZ2VyPjA8L2ludGVnZXI+PC9kaWN0PjwvZGljdD48L2RpY3Q+IgogICAgICB1cGRhdGVfc3dpZnRfZGlhbG9nIHdhaXQgIkFkZGluZyAkaSB0byBEb2NrIgogICAgZmkKICBkb25lCgogIGVjaG8gIiQoZGF0ZSkgfCBBZGRpbmcgRG93bmxvYWRzIFN0YWNrIgogIGRvd25sb2FkZm9sZGVyPSIke3VzZXJIb21lfS9Eb3dubG9hZHMiCiAgcnVuX2FzX3VzZXIgZGVmYXVsdHMgd3JpdGUgY29tLmFwcGxlLmRvY2sgcGVyc2lzdGVudC1vdGhlcnMgLWFycmF5LWFkZCAiPGRpY3Q+PGtleT50aWxlLWRhdGE8L2tleT48ZGljdD48a2V5PmZpbGUtZGF0YTwva2V5PjxkaWN0PjxrZXk+X0NGVVJMU3RyaW5nPC9rZXk+PHN0cmluZz4kZG93bmxvYWRmb2xkZXI8L3N0cmluZz48a2V5Pl9DRlVSTFN0cmluZ1R5cGU8L2tleT48aW50ZWdlcj4wPC9pbnRlZ2VyPjwvZGljdD48a2V5PmZpbGUtbGFiZWw8L2tleT48c3RyaW5nPkRvd25sb2Fkczwvc3RyaW5nPjxrZXk+ZmlsZS10eXBlPC9rZXk+PHN0cmluZz4yPC9zdHJpbmc+PC9kaWN0PjxrZXk+dGlsZS10eXBlPC9rZXk+PHN0cmluZz5kaXJlY3RvcnktdGlsZTwvc3RyaW5nPjwvZGljdD4iCgogICNlY2hvICIkKGRhdGUpIHwgRW5hYmxpbmcgTWFnbmlmaWNhdGlvbiIKICAjZGVmYXVsdHMgd3JpdGUgY29tLmFwcGxlLmRvY2sgbWFnbmlmaWNhdGlvbiAtYm9vbGVhbiBZRVMKCiAgI2VjaG8gIiQoZGF0ZSkgfCBFbmFibGUgRGltIEhpZGRlbiBBcHBzIGluIERvY2siCiAgI2RlZmF1bHRzIHdyaXRlIGNvbS5hcHBsZS5kb2NrIHNob3doaWRkZW4gLWJvb2wgdHJ1ZQoKICAjZWNobyAiJChkYXRlKSB8IEVuYWJsZSBBdXRvIEhpZGUgZG9jayIKICAjZGVmYXVsdHMgd3JpdGUgY29tLmFwcGxlLmRvY2sgYXV0b2hpZGUgLWJvb2wgdHJ1ZQoKICAjZWNobyAiJChkYXRlKSB8IERpc2FibGUgc2hvdyByZWNlbnQgaXRlbXMiCiAgI2RlZmF1bHRzIHdyaXRlIGNvbS5hcHBsZS5kb2NrIHNob3ctcmVjZW50cyAtYm9vbCBGQUxTRQoKICAjZWNobyAiJChkYXRlKSB8IEVuYWJsZSBNaW5pbWlzZSBJY29ucyBpbnRvIERvY2sgSWNvbnMiCiAgI2RlZmF1bHRzIHdyaXRlIGNvbS5hcHBsZS5kb2NrIG1pbmltaXplLXRvLWFwcGxpY2F0aW9uIC1ib29sIHllcwoKICBlY2hvICIkKGRhdGUpIHwgUmVzdGFydGluZyBEb2NrIgogIGtpbGxhbGwgLUtJTEwgRG9jawoKICB0b3VjaCAiL1VzZXJzLyRjdXJyZW50VXNlci9MaWJyYXJ5L1ByZWZlcmVuY2VzLy5kb2NrY29uZmlndXJlZCIKICB1cGRhdGVfc3dpZnRfZGlhbG9nIHN1Y2Nlc3MgIkNvbmZpZ3VyZWQgZG9jay4uLiIKCn0KCndhaXRfZm9yX2FwcHNfaW5zdGFsbGF0aW9uKCkgewogICAgbG9jYWwgdGltZW91dD0kMQogICAgbG9jYWwgc3RhcnRfdGltZT0kKGRhdGUgKyVzKQogICAgdXBkYXRlX3N3aWZ0X2RpYWxvZyB3YWl0ICJXYWl0aW5nIGZvciBhcHBzLi4uIgogICAgd2hpbGUgdHJ1ZTsgZG8KICAgICAgICBhbGxfaW5zdGFsbGVkPXRydWUKCiAgICAgICAgZm9yIGFwcCBpbiAiJHtkb2NrYXBwc1tAXX0iOyBkbwogICAgICAgICAgICBpZiBbWyAhIC1lICIkYXBwIiBdXTsgdGhlbgogICAgICAgICAgICAgICAgYWxsX2luc3RhbGxlZD1mYWxzZQogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgZmkKICAgICAgICBkb25lCgogICAgICAgIGlmIFtbICIkYWxsX2luc3RhbGxlZCIgPSB0cnVlIF1dOyB0aGVuCiAgICAgICAgICAgIGVjaG8gIiQoZGF0ZSkgfCBBbGwgYXBwcyBhcmUgaW5zdGFsbGVkIgogICAgICAgICAgICByZXR1cm4gMAogICAgICAgIGZpCgogICAgICAgIGN1cnJlbnRfdGltZT0kKGRhdGUgKyVzKQogICAgICAgIGVsYXBzZWRfdGltZT0kKCggY3VycmVudF90aW1lIC0gc3RhcnRfdGltZSApKQoKICAgICAgICBpZiBbWyAkZWxhcHNlZF90aW1lIC1nZSAkdGltZW91dCBdXTsgdGhlbgogICAgICAgICAgICBlY2hvICIkKGRhdGUpIHwgVGltZW91dCByZWFjaGVkLiBOb3QgYWxsIGFwcHMgYXJlIGluc3RhbGxlZC4iCiAgICAgICAgICAgIHJldHVybiAxCiAgICAgICAgZmkKCiAgICAgICAgc2xlZXAgNSAjIFNsZWVwIGZvciBhIGZldyBzZWNvbmRzIGJlZm9yZSBjaGVja2luZyBhZ2FpbgogICAgZG9uZQp9CgojIyBTY3JpcHQgQmVnaW5zIEhlcmUKCiMgQ2hlY2sgaWYgYXBwcyBhcmUgaW5zdGFsbGVkCmlmIFtbICIkd2FpdEZvckFwcHMiID09IHRydWUgXV07IHRoZW4KICAgIGVjaG8gIiQoZGF0ZSkgfCBXYWl0aW5nIGZvciBhcHBzIHRvIGJlIGluc3RhbGxlZC4uLiIKICAgIHdhaXRfZm9yX2FwcHNfaW5zdGFsbGF0aW9uIDkwMCAgICAgICMgV2FpdCA5MDAgc2Vjb25kcyBmb3IgYXBwcyB0byBiZSBpbnN0YWxsZWQKZmkKCiMgaWYgdXNlRG9ja1V0aWwgaXMgdHJ1ZSwgdXNlIGRvY2t1dGlsIHRvIGNvbmZpZ3VyZSB0aGUgZG9jawppZiBbWyAiJHVzZURvY2tVdGlsIiA9PSB0cnVlIF1dOyB0aGVuCiAgICBlY2hvICIkKGRhdGUpIHwgQ29uZmlndXJpbmcgZG9jayB3aXRoIGRvY2t1dGlsIgogICAgaW5zdGFsbF9kb2NrdXRpbF9pZl9taXNzaW5nCiAgICBjb25maWd1cmVfZG9ja193aXRoX2RvY2t1dGlsCmVsc2UKICAgIGVjaG8gIiQoZGF0ZSkgfCBDb25maWd1cmluZyBkb2NrIHdpdGggcGxpc3QiCiAgICBjb25maWd1cmVfZG9ja192aWFfcGxpc3QKZmk=",
     "runAsAccount": "system",
     "fileName": "scr-sys-101-configure-dock.sh",
     "roleScopeTagIds": [
          "Default"
     ]
}