{
     "customAttributeName": null,
     "customAttributeType": "string",
     "displayName": "[intune-my-macs] CAT-SYS-100 - macOS Compatibility Checker",
     "description": "Determines the maximum supported macOS version for the current Mac by querying Apple's GDMF API with the hardware's board ID. Works with both Intel and Apple Silicon Macs to provide compatibility information for macOS upgrades.",
     "scriptContent": "IyEvdXNyL2Jpbi9lbnYgenNoCgojIG1hY09TIFNlcXVvaWEgQ29tcGF0aWJpbGl0eSBDaGVja2VyIGZvciBNaWNyb3NvZnQgSW50dW5lCiMgVGhpcyBzY3JpcHQgYXV0b21hdGljYWxseSBkZXRlcm1pbmVzIHRoZSBtYXhpbXVtIHN1cHBvcnRlZCBtYWNPUyB2ZXJzaW9uIGZvciB0aGUgY3VycmVudCBNYWMKIyBieSBxdWVyeWluZyBBcHBsZSdzIG9mZmljaWFsIEdETUYgQVBJIHdpdGggdGhlIGhhcmR3YXJlJ3MgYm9hcmQgSUQuCiMKIyBXb3JrcyB3aXRoIGJvdGggSW50ZWwgYW5kIEFwcGxlIFNpbGljb24gTWFjczoKIyAtIEFwcGxlIFNpbGljb246IFVzZXMgJ3RhcmdldC1zdWItdHlwZScgcHJvcGVydHkgKGUuZy4sIEo1MTRzQVApICAKIyAtIEludGVsIE1hY3M6IFVzZXMgJ2JvYXJkLWlkJyBwcm9wZXJ0eSBjb252ZXJ0ZWQgdG8gTWFjLVhYWFhYWFhYWFhYWFhYWFggZm9ybWF0CiMKIyBSZXF1aXJlczogY3VybCwganEsIGFuZCBuZXR3b3JrIGNvbm5lY3Rpdml0eSB0byBnZG1mLmFwcGxlLmNvbQojIE91dHB1dDogQ2xlYW4gdmVyc2lvbiBuYW1lIHN1aXRhYmxlIGZvciBJbnR1bmUgQ3VzdG9tIEF0dHJpYnV0ZXMKCnNldCAtZXVvIHBpcGVmYWlsCgpHRE1GX1VSTD0iaHR0cHM6Ly9nZG1mLmFwcGxlLmNvbS92Mi9wbXYiCgojIENoZWNrIGlmIGpxIGlzIGF2YWlsYWJsZSBhbmQgaW5zdGFsbCBpZiBtaXNzaW5nCmVuc3VyZV9qcSgpIHsKICAgICMgQ2hlY2sgY29tbW9uIGxvY2F0aW9ucyBmaXJzdAogICAgaWYgY29tbWFuZCAtdiBqcSA+L2Rldi9udWxsIDI+JjE7IHRoZW4KICAgICAgICByZXR1cm4gMAogICAgZmkKICAgIAogICAgIyBDaGVjayBpZiB3ZSBhbHJlYWR5IGluc3RhbGxlZCBpdCB0byB1c2VyJ3MgbG9jYWwgYmluCiAgICBpZiBbWyAteCAiJEhPTUUvLmxvY2FsL2Jpbi9qcSIgXV07IHRoZW4KICAgICAgICBleHBvcnQgUEFUSD0iJEhPTUUvLmxvY2FsL2JpbjokUEFUSCIKICAgICAgICByZXR1cm4gMAogICAgZmkKICAgIAogICAgZWNobyAianEgbm90IGZvdW5kLCBhdHRlbXB0aW5nIHRvIGluc3RhbGwuLi4iID4mMgogICAgCiAgICAjIERldGVybWluZSBhcmNoaXRlY3R1cmUgYW5kIHNldCBkb3dubG9hZCBVUkwKICAgIGxvY2FsIGFyY2gKICAgIGFyY2g9JCh1bmFtZSAtbSkKICAgIGxvY2FsIGpxX3VybAogICAgCiAgICBjYXNlICIkYXJjaCIgaW4KICAgICAgICBhcm02NCkKICAgICAgICAgICAganFfdXJsPSJodHRwczovL2dpdGh1Yi5jb20vanFsYW5nL2pxL3JlbGVhc2VzL2xhdGVzdC9kb3dubG9hZC9qcS1tYWNvcy1hcm02NCIKICAgICAgICAgICAgOzsKICAgICAgICB4ODZfNjQpCiAgICAgICAgICAgIGpxX3VybD0iaHR0cHM6Ly9naXRodWIuY29tL2pxbGFuZy9qcS9yZWxlYXNlcy9sYXRlc3QvZG93bmxvYWQvanEtbWFjb3MtYW1kNjQiCiAgICAgICAgICAgIDs7CiAgICAgICAgKikKICAgICAgICAgICAgZWNobyAiVW5zdXBwb3J0ZWQgYXJjaGl0ZWN0dXJlOiAkYXJjaCIgPiYyCiAgICAgICAgICAgIHJldHVybiAxCiAgICAgICAgICAgIDs7CiAgICBlc2FjCiAgICAKICAgIGVjaG8gIkRvd25sb2FkaW5nIGpxIGZvciAkYXJjaC4uLiIgPiYyCiAgICAKICAgICMgRG93bmxvYWQganEgdG8gdGVtcG9yYXJ5IGxvY2F0aW9uCiAgICBsb2NhbCB0ZW1wX2pxPSIvdG1wL2pxX3RlbXBfJCQiCiAgICBpZiAhIGN1cmwgLWZzU0wgIiRqcV91cmwiIC1vICIkdGVtcF9qcSIgMj4vZGV2L251bGw7IHRoZW4KICAgICAgICBlY2hvICJGYWlsZWQgdG8gZG93bmxvYWQganEiID4mMgogICAgICAgIHJldHVybiAxCiAgICBmaQogICAgCiAgICAjIE1ha2UgZXhlY3V0YWJsZQogICAgY2htb2QgK3ggIiR0ZW1wX2pxIgogICAgCiAgICAjIFRyeSB0byBpbnN0YWxsIHRvIC91c3IvbG9jYWwvYmluIChzeXN0ZW0td2lkZSkKICAgIGlmIHN1ZG8gbXYgIiR0ZW1wX2pxIiAvdXNyL2xvY2FsL2Jpbi9qcSAyPi9kZXYvbnVsbDsgdGhlbgogICAgICAgIGVjaG8gImpxIGluc3RhbGxlZCBzdWNjZXNzZnVsbHkgdG8gL3Vzci9sb2NhbC9iaW4vanEiID4mMgogICAgICAgIHJldHVybiAwCiAgICBmaQogICAgCiAgICAjIEZhbGxiYWNrOiBpbnN0YWxsIHRvIHVzZXIncyBsb2NhbCBiaW4gZGlyZWN0b3J5CiAgICBta2RpciAtcCAiJEhPTUUvLmxvY2FsL2JpbiIKICAgIGlmIG12ICIkdGVtcF9qcSIgIiRIT01FLy5sb2NhbC9iaW4vanEiIDI+L2Rldi9udWxsOyB0aGVuCiAgICAgICAgZWNobyAianEgaW5zdGFsbGVkIHN1Y2Nlc3NmdWxseSB0byAkSE9NRS8ubG9jYWwvYmluL2pxIiA+JjIKICAgICAgICBleHBvcnQgUEFUSD0iJEhPTUUvLmxvY2FsL2JpbjokUEFUSCIKICAgICAgICAjIFZlcmlmeSBpdCdzIG5vdyBhY2Nlc3NpYmxlCiAgICAgICAgaWYgY29tbWFuZCAtdiBqcSA+L2Rldi9udWxsIDI+JjE7IHRoZW4KICAgICAgICAgICAgcmV0dXJuIDAKICAgICAgICBmaQogICAgZmkKICAgIAogICAgZWNobyAiRmFpbGVkIHRvIGluc3RhbGwganEgLSB1bmFibGUgdG8gbW92ZSB0byBpbnN0YWxsYXRpb24gZGlyZWN0b3J5IiA+JjIKICAgIHJtIC1mICIkdGVtcF9qcSIKICAgIHJldHVybiAxCn0KCiMgR2V0IHRoZSBNYWMncyBib2FyZCBJRCBkaXJlY3RseSBmcm9tIGlvcmVnCmdldF9ib2FyZF9pZCgpIHsKICAgICMgVHJ5IEFwcGxlIFNpbGljb24gZm9ybWF0IGZpcnN0ICh0YXJnZXQtc3ViLXR5cGUpCiAgICBsb2NhbCBib2FyZF9pZAogICAgYm9hcmRfaWQ9JCgvdXNyL3NiaW4vaW9yZWcgLXJkMSAtYyBJT1BsYXRmb3JtRXhwZXJ0RGV2aWNlIDI+L2Rldi9udWxsIHwgXAogICAgICAgICAgICAgICBhd2sgLUYnIicgJy8idGFyZ2V0LXN1Yi10eXBlIi8ge3ByaW50ICQoTkYtMSk7IGV4aXR9JykKICAgIAogICAgaWYgW1sgLW4gIiRib2FyZF9pZCIgXV07IHRoZW4KICAgICAgICBlY2hvICIkYm9hcmRfaWQiCiAgICAgICAgcmV0dXJuIDAKICAgIGZpCiAgICAKICAgICMgVHJ5IEludGVsIE1hYyBmb3JtYXQgLSBib2FyZC1pZCBpbiBNYWMtWFhYWCBmb3JtYXQKICAgIGxvY2FsIGJvYXJkX2lkX3N0cmluZwogICAgYm9hcmRfaWRfc3RyaW5nPSQoL3Vzci9zYmluL2lvcmVnIC1yZDEgLWMgSU9QbGF0Zm9ybUV4cGVydERldmljZSAyPi9kZXYvbnVsbCB8IFwKICAgICAgICAgICAgICAgICAgICAgIGF3ayAtRiciJyAnLyJib2FyZC1pZCIvIHtwcmludCAkKE5GLTEpOyBleGl0fScpCiAgICAKICAgIGlmIFtbIC1uICIkYm9hcmRfaWRfc3RyaW5nIiAmJiAiJGJvYXJkX2lkX3N0cmluZyIgPX4gXk1hYy0gXV07IHRoZW4KICAgICAgICBlY2hvICIkYm9hcmRfaWRfc3RyaW5nIgogICAgICAgIHJldHVybiAwCiAgICBmaQogICAgCiAgICByZXR1cm4gMQp9CgojIEdldCBtb2RlbCBJRCBhcyBmYWxsYmFjawpnZXRfbW9kZWxfaWQoKSB7CiAgICBsb2NhbCBtb2RlbAogICAgbW9kZWw9JChzeXNjdGwgLW4gaHcubW9kZWwgMj4vZGV2L251bGwpCiAgICBlY2hvICIkbW9kZWwiCn0KCiMgQ29udmVydCB2ZXJzaW9uIG51bWJlciB0byBtYXJrZXRpbmcgbmFtZQpub3JtYWxpemVfbWFjb3NfdmVyc2lvbigpIHsKICAgIGxvY2FsIHZlcnNpb249IiQxIgogICAgbG9jYWwgbWFqb3JfdmVyc2lvbj0iJHt2ZXJzaW9uJSUuKn0iCiAgICAKICAgIGNhc2UgIiRtYWpvcl92ZXJzaW9uIiBpbgogICAgICAgIDI2KSBlY2hvICJtYWNPUyBUYWhvZSIgOzsKICAgICAgICAxNSkgZWNobyAibWFjT1MgU2VxdW9pYSIgOzsKICAgICAgICAxNCkgZWNobyAibWFjT1MgU29ub21hIiA7OwogICAgICAgIDEzKSBlY2hvICJtYWNPUyBWZW50dXJhIiA7OwogICAgICAgIDEyKSBlY2hvICJtYWNPUyBNb250ZXJleSIgOzsKICAgICAgICAxMSkgZWNobyAibWFjT1MgQmlnIFN1ciIgOzsKICAgICAgICAxMCkgZWNobyAibWFjT1MgQ2F0YWxpbmEiIDs7CiAgICAgICAgKikgZWNobyAibWFjT1MgJHZlcnNpb24iIDs7CiAgICBlc2FjCn0KCiMgRmluZCBtYXhpbXVtIHN1cHBvcnRlZCB2ZXJzaW9uIHVzaW5nIGJvYXJkIElECmZpbmRfbWF4X3N1cHBvcnRlZF92ZXJzaW9uKCkgewogICAgbG9jYWwgZGV2aWNlX2lkPSIkMSIKICAgIAogICAgIyBEb3dubG9hZCBHRE1GIGRhdGEKICAgIGxvY2FsIGdkbWZfZGF0YQogICAgaWYgISBnZG1mX2RhdGE9JChjdXJsIC1mc1NMICIkR0RNRl9VUkwiIDI+L2Rldi9udWxsKTsgdGhlbgogICAgICAgIHJldHVybiAxCiAgICBmaQogICAgCiAgICAjIEZpbmQgdGhlIGhpZ2hlc3QgbWFjT1MgdmVyc2lvbiB0aGF0IHN1cHBvcnRzIG91ciBkZXZpY2UKICAgIGxvY2FsIG1heF92ZXJzaW9uCiAgICBtYXhfdmVyc2lvbj0kKGVjaG8gIiRnZG1mX2RhdGEiIHwganEgLXIgLS1hcmcgZGV2aWNlICIkZGV2aWNlX2lkIiAnCiAgICAgICAgLlB1YmxpY0Fzc2V0U2V0cy5tYWNPU1tdIHwgCiAgICAgICAgc2VsZWN0KC5TdXBwb3J0ZWREZXZpY2VzW10gfCAuID09ICRkZXZpY2UpIHwgCiAgICAgICAgLlByb2R1Y3RWZXJzaW9uCiAgICAnIDI+L2Rldi9udWxsIHwgc29ydCAtViB8IHRhaWwgLTEpCiAgICAKICAgIGlmIFtbIC1uICIkbWF4X3ZlcnNpb24iICYmICIkbWF4X3ZlcnNpb24iICE9ICJudWxsIiBdXTsgdGhlbgogICAgICAgIGVjaG8gIiRtYXhfdmVyc2lvbiIKICAgICAgICByZXR1cm4gMAogICAgZmkKICAgIAogICAgcmV0dXJuIDEKfQoKIyBNYWluIGV4ZWN1dGlvbgptYWluKCkgewogICAgIyBFbnN1cmUganEgaXMgYXZhaWxhYmxlCiAgICBpZiAhIGVuc3VyZV9qcTsgdGhlbgogICAgICAgIGVjaG8gIkVycm9yOiBqcSBpcyByZXF1aXJlZCBidXQgbm90IGF2YWlsYWJsZSIKICAgICAgICBleGl0IDEKICAgIGZpCiAgICAKICAgICMgVHJ5IHRvIGdldCBib2FyZCBJRCBmaXJzdAogICAgbG9jYWwgZGV2aWNlX2lkCiAgICBpZiBkZXZpY2VfaWQ9JChnZXRfYm9hcmRfaWQpOyB0aGVuCiAgICAgICAgIyBCb2FyZCBJRCBmb3VuZCAtIHVzZSBpdAogICAgICAgIDoKICAgIGVsc2UKICAgICAgICAjIEZhbGxiYWNrIHRvIG1vZGVsIElECiAgICAgICAgZGV2aWNlX2lkPSQoZ2V0X21vZGVsX2lkKQogICAgZmkKICAgIAogICAgaWYgW1sgLXogIiRkZXZpY2VfaWQiIF1dOyB0aGVuCiAgICAgICAgZWNobyAiVW5rbm93biBNb2RlbDogVW5hYmxlIHRvIGRldGVybWluZSIKICAgICAgICBleGl0IDEKICAgIGZpCiAgICAKICAgICMgSGFuZGxlIHZpcnR1YWwgbWFjaGluZXMKICAgIGlmIFtbICIkZGV2aWNlX2lkIiA9PSAiVmlydHVhbE1hYyIqIF1dIHx8IFtbICIkZGV2aWNlX2lkIiA9PSAiVk1BMk1BQ09TQVAiIF1dIHx8IFtbICIkZGV2aWNlX2lkIiA9PSAiVk13YXJlIiogXV07IHRoZW4KICAgICAgICBlY2hvICJWaXJ0dWFsIE1hY2hpbmUiCiAgICAgICAgZXhpdCAwCiAgICBmaQogICAgCiAgICAjIEZpbmQgbWF4aW11bSBzdXBwb3J0ZWQgdmVyc2lvbgogICAgbG9jYWwgbWF4X3ZlcnNpb24KICAgIGlmIG1heF92ZXJzaW9uPSQoZmluZF9tYXhfc3VwcG9ydGVkX3ZlcnNpb24gIiRkZXZpY2VfaWQiKTsgdGhlbgogICAgICAgIG5vcm1hbGl6ZV9tYWNvc192ZXJzaW9uICIkbWF4X3ZlcnNpb24iCiAgICAgICAgZXhpdCAwCiAgICBlbHNlCiAgICAgICAgZWNobyAiVW5rbm93biBNb2RlbDogJGRldmljZV9pZCIKICAgICAgICBleGl0IDEKICAgIGZpCn0KCm1haW4gIiRAIgo=",
     "runAsAccount": "system",
     "fileName": "cat-sys-100-compatibility-checker.zsh",
     "roleScopeTagIds": [
          "Default"
     ]
}